# 의뢰소 UI 전면 재작성 계획

> **결정 사항**
> - 멤버 선택: Look 상세 스타일 (한 명씩 크게, 좌우 네비)
> - 접근 방식: 전면 재작성

---

## 1. 최종 페이지 구조

| 순서 | 라우트 | 참고 | 설명 |
|------|--------|------|------|
| 0 | `/` | Bécane 메인 + Look 상세 | 랜딩 + 멤버 선택 (통합, URL params로 상태 관리) |
| 1 | `/music` | Bécane Stories | 음악 선택 (갤러리 스타일) |
| 2 | `/motion` | Bécane ALL 그리드 | 모션 선택 (6열 GIF 그리드) |
| 3 | `/generate` | Bécane 장바구니 | 생성 중 (오버레이) |
| 4 | `/result/$id` | Bécane Look 상세 | 결과 (비디오 + 액션) |

---

## 2. 구현 순서

### Phase 1: 기반 구축

#### 1.1 디자인 토큰 (`app/styles/tokens.css`)
```css
:root {
  /* Colors */
  --color-bg: #FFFFFF;
  --color-text: #000000;
  --color-text-secondary: #888888;
  --color-border: #E5E5E5;

  /* Typography */
  --font-title: 'Pretendard', sans-serif;
  --font-size-hero: 3rem;      /* 48px */
  --font-size-title: 2rem;     /* 32px */
  --font-size-body: 1rem;      /* 16px */
  --font-size-caption: 0.75rem; /* 12px */

  /* Spacing */
  --space-section: 80px;
  --space-component: 24px;
  --space-page-x: 24px;
  --space-page-x-desktop: 48px;

  /* Transitions */
  --transition-fast: 150ms ease;
  --transition-normal: 200ms ease;
}
```

#### 1.2 공통 레이아웃 (`app/components/layout/`)

**Header.tsx**
```
┌─────────────────────────────────────────────────────────────────┐
│  의뢰소                                           [상황별 버튼]  │
└─────────────────────────────────────────────────────────────────┘
```
- 로고: 항상 좌측
- 우측: 페이지별 다름 (없음 / CLOSE / NEW)

**FloatingBar.tsx**
```
┌─────────────────────────────────────────────────────────────────┐
│  [좌측 정보]                                      [우측 CTA]    │
└─────────────────────────────────────────────────────────────────┘
```
- 하단 고정
- 좌측: 선택 정보 또는 필터
- 우측: CTA 버튼

**PageLayout.tsx**
```tsx
<div className="min-h-screen bg-white flex flex-col">
  <Header />
  <main className="flex-1">{children}</main>
  <FloatingBar />
</div>
```

#### 1.3 공통 컴포넌트 (`app/components/ui/`)

| 컴포넌트 | 용도 |
|----------|------|
| `StepIndicator` | "STEP 1 / 4" 또는 "MEMBER 01 / 05" |
| `LargeTitle` | 대형 타이틀 (3rem, Bold) |
| `SubTitle` | 서브타이틀 (0.75rem, 대문자, 회색) |
| `NavButton` | ← PREV / NEXT → 버튼 |
| `DotIndicator` | [● ○ ○ ○ ○] 인디케이터 |
| `GridCard` | 모션 그리드 카드 (번호 라벨 + GIF) |

---

### Phase 2: 페이지별 구현

#### 2.1 랜딩 + 멤버 선택 (`/`) ✅ 구현 완료

> **변경 사항**: 랜딩과 멤버 선택을 하나의 페이지로 통합. URL params (`?selected=memberId`)로 상태 관리.

**레이어 구조**
```
┌─────────────────────────────────────────────────────────────────┐
│  Layer 1: Members (전체 화면 배경, absolute inset-0)            │
│  Layer 2: Header (상단 고정)                                    │
│  Layer 3: Title (좌상단)                                        │
│  Layer 4: Bottom Bar (하단 고정)                                │
│  Layer 5: Navigation (선택 상태에서만)                          │
└─────────────────────────────────────────────────────────────────┘
```

**홈 상태 (selected 없음)**
```
┌─────────────────────────────────────────────────────────────────┐
│  의뢰소                                                         │
├─────────────────────────────────────────────────────────────────┤
│  REQUEST LAB                                                    │
│  의뢰소                                                         │
│  MEMBERS  5                                                     │
│                                                                 │
│         ┌───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐                 │
│         │   │   │   │   │   │   │   │   │   │   ← 흑백        │
│         └───┘   └───┘   └───┘   └───┘   └───┘     호버→컬러   │
│                       (간격: 165px)                             │
├─────────────────────────────────────────────────────────────────┤
│  5 MEMBERS                                      [의뢰 시작 →]   │
└─────────────────────────────────────────────────────────────────┘
```

**선택 상태 (?selected=memberId)**
```
┌─────────────────────────────────────────────────────────────────┐
│  ← 뒤로                                         MEMBER 01 / 05  │
├─────────────────────────────────────────────────────────────────┤
│  금비                                                           │
│  01 / 05 ━━━━━━━━━━━━━                                         │
│                                                                 │
│    ┌───┐        ┌─────────┐        ┌───┐                       │
│    │30%│        │         │        │30%│    ← 2칸 떨어진 멤버  │
│    │   │  ┌───┐ │  100%   │ ┌───┐  │   │      화면 끝 (44vw)  │
│    └───┘  │50%│ │ (80vh)  │ │50%│  └───┘                       │
│           └───┘ │         │ └───┘         ← 1칸: 50%           │
│                 └─────────┘               ← 선택: 컬러, 80vh   │
│                                                                 │
│  ← PREV                                              NEXT →    │
├─────────────────────────────────────────────────────────────────┤
│  금비                                              [선택 →]    │
└─────────────────────────────────────────────────────────────────┘
```

**구현 세부사항**
- 멤버 영역: `absolute inset-0`, 전체 화면 차지
- UI 레이어: absolute로 멤버 위에 떠있음
- 홈 → 선택 전환: 부드러운 애니메이션 (duration-500ms, ease-out)
- 위치 계산:
  - 홈: `translateX((index - centerIndex) * 165px)`
  - 선택: `translateX(diff * 22vw)` (2칸 떨어진 멤버가 44vw ≈ 화면 끝)
- 크기 계산:
  - 기본 이미지 크기: `w-24 h-48` (고정, 변하지 않음)
  - scale로만 크기 조절 (크기 변화 시 잘림 현상 방지)
  - baseScale = 3.5 (선택된 멤버가 약 80vh가 되도록)
  - 홈 상태: scale 1
  - 선택 상태:
    - 선택된 멤버: scale 3.5 (컬러)
    - 1칸 떨어진 멤버: scale 1.75 (50%), opacity 0.2 (흑백)
    - 2칸 떨어진 멤버: scale 1.05 (30%), opacity 0.08 (흑백)
- 호버 시 흑백 → 컬러 전환 (홈 상태에서만)
- 드래그 방지: `draggable={false}`, `select-none`, `pointer-events-none`
- **턴테이블 영상**: PNG 대신 MP4 영상 사용
  - `<video>` 태그: `autoPlay`, `loop`, `muted`, `playsInline`, `disablePictureInPicture`
  - `poster` 속성으로 로딩 전 이미지 표시
  - iOS Safari 자동재생 호환

---

#### 2.3 음악 선택 (`/music`) ✅ 구현 완료

**와이어프레임**
```
┌─────────────────────────────────────────────────────────────────┐
│  [←]                                              TRACK 1 / 3   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  YUM                                            ← LargeTitle    │
│                                                                 │
│                    ┌─────────────┐                              │
│                    │             │                              │
│                    │  [앨범아트]  │              ← 앨범아트      │
│                    │     ▶️      │                 클릭 시 재생  │
│                    │             │                              │
│                    └─────────────┘                              │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  [썸1] [썸2] [썸3]                              ← 썸네일 네비    │
├─────────────────────────────────────────────────────────────────┤
│  Yum                                               [선택 →]    │
└─────────────────────────────────────────────────────────────────┘
```

**구현 포인트**
- 한 곡씩 크게 표시 (갤러리 스타일)
- 앨범아트 클릭 시 미리듣기 재생/일시정지 토글
- 하단 썸네일로 빠른 탐색
- 선택 버튼 클릭 시 `/motion`으로 이동

**음악 트랙 (3곡)**
| ID | 제목 | 파일 |
|----|------|------|
| 1 | Yum | `/music/Yum.mp3` |
| 2 | POP IT | `/music/POP IT.mp3` |
| 3 | I'm lovin' it | `/music/I'm lovin' it.mp3` |

**오디오 재생 구현**
- HTML5 `<audio>` 요소 + `useRef` 참조
- 트랙 전환 시 자동 소스 업데이트 (`useEffect`)
- 재생 중 상태에서 트랙 전환 시 자동 이어서 재생
- 페이지 이탈 시 자동 정지 (cleanup)

---

#### 2.4 모션 선택 (`/motion`)

**와이어프레임**
```
┌─────────────────────────────────────────────────────────────────┐
│  [←]                                              STEP 3 / 4    │
├─────────────────────────────────────────────────────────────────┤
│  춤                                             ← LargeTitle    │
│  MOTIONS  9                                     ← Counter       │
├─────────────────────────────────────────────────────────────────┤
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐              │
│  │ 01  │ │ 02  │ │ 03  │ │ 04  │ │ 05  │ │ 06  │   ← 6열      │
│  │[GIF]│ │[GIF]│ │[GIF]│ │[GIF]│ │[GIF]│ │[GIF]│     그리드   │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘              │
│  ┌─────┐ ┌─────┐ ┌─────┐                                       │
│  │ 07  │ │ 08  │ │ 09  │                                       │
│  └─────┘ └─────┘ └─────┘                                       │
├─────────────────────────────────────────────────────────────────┤
│  [전체] [춤] [표정] [포즈]                   Catwalk [생성 →]   │
└─────────────────────────────────────────────────────────────────┘
```

**구현 포인트**
- 6열 그리드 (모바일: 3열)
- 각 카드에 번호 라벨 (01, 02...)
- 실제 모션 GIF/비디오 썸네일
- 호버 시 모션 재생 + 이름 표시
- 하단 카테고리 필터 탭
- 선택된 모션명 + CTA 버튼

---

#### 2.5 생성 중 (`/generate` 또는 오버레이)

**와이어프레임**
```
┌─────────────────────────────────────────────────────────────────┐
│  의뢰소                                              CLOSE      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  GENERATING                                     ← LargeTitle    │
│                                                                 │
│                    ┌─────────────┐                              │
│                    │             │                              │
│                    │  [멤버 +    │              ← 선택 요약      │
│                    │   미세 애니] │                 이미지       │
│                    │             │                              │
│                    └─────────────┘                              │
│                                                                 │
│  Luna × Catwalk × Aurora Night                  ← 선택 정보     │
│                                                                 │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 65%           ← 프로그레스    │
│                                                                 │
│  예상 완료: ~4분                                                 │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

**구현 포인트**
- 오버레이 스타일 (배경 dim)
- 선택한 멤버 이미지 표시
- 프로그레스 바 + 예상 시간
- 완료 시 자동으로 `/result/$id`로 이동

---

#### 2.6 결과 (`/result/$id`)

**와이어프레임**
```
┌─────────────────────────────────────────────────────────────────┐
│  의뢰소                                                  NEW    │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  LUNA × CATWALK                                 ← LargeTitle    │
│                                                                 │
│                    ┌─────────────┐                              │
│                    │             │                              │
│                    │  [생성된    │              ← 비디오        │
│                    │   영상]     │                 플레이어     │
│                    │     ▶️      │                              │
│                    │             │                              │
│                    └─────────────┘                              │
│                                                                 │
│  Music: Aurora Night                                            │
│  Duration: 10초                                                 │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│  [다운로드]  [공유]                              [다시 만들기 →] │
└─────────────────────────────────────────────────────────────────┘
```

**구현 포인트**
- 생성된 영상 크게 중앙
- 비디오 플레이어 컨트롤
- 다운로드 / 공유 버튼
- 다시 만들기 → `/member`로 이동

---

## 3. 파일 구조 (재작성 후)

```
app/
├── components/
│   ├── layout/
│   │   ├── Header.tsx
│   │   ├── FloatingBar.tsx
│   │   ├── PageLayout.tsx
│   │   └── index.ts
│   └── ui/
│       ├── StepIndicator.tsx
│       ├── LargeTitle.tsx
│       ├── SubTitle.tsx
│       ├── Counter.tsx
│       ├── NavButton.tsx
│       ├── DotIndicator.tsx
│       └── index.ts
├── routes/
│   ├── _index.tsx          # 랜딩 + 멤버 선택 (통합, 레이어 기반 레이아웃)
│   ├── music.tsx           # 음악 선택
│   ├── motion.tsx          # 모션 선택
│   ├── generate.tsx        # 생성 중
│   └── result.$id.tsx      # 결과
└── lib/
    └── (기존 유지)
```

> **Note**: `/member` 라우트 제거됨. 랜딩과 멤버 선택이 `_index.tsx`에 통합되어 URL params로 상태 관리.

---

## 4. 구현 체크리스트

### Phase 1: 기반 구축 ✅ (2026-01-29)
- [x] 디자인 토큰 정의 (`app/app.css`)
- [x] Header 컴포넌트
- [x] FloatingBar 컴포넌트
- [x] PageLayout 컴포넌트
- [x] 공통 UI 컴포넌트들 (StepIndicator, LargeTitle, SubTitle, Counter, NavButton, DotIndicator)

### Phase 2: 페이지 구현 ✅ (2026-01-29)
- [x] 랜딩 + 멤버 선택 (`/`) - 통합 구현
- [x] 음악 선택 (`/music`)
- [x] 모션 선택 (`/motion`)
- [x] 생성 중 (`/generate`)
- [x] 결과 (`/result/$id`)

### Phase 2.1: 멤버 선택 애니메이션 개선 ✅ (2026-01-29)
- [x] 레이어 기반 레이아웃 (멤버 영역 전체 화면, UI 위에 떠있음)
- [x] 홈 ↔ 선택 상태 부드러운 전환 애니메이션
- [x] 선택된 멤버 80vh 크기
- [x] 1칸 떨어진 멤버 50%, 2칸 떨어진 멤버 30% 크기
- [x] vw 단위 사용하여 2칸 떨어진 멤버가 화면 끝에 위치

### Phase 2.2: 멤버 턴테이블 영상 교체 ✅ (2026-01-29)
- [x] 멤버별 MP4 영상 5개 준비 및 `/public/members/`에 배치
- [x] MEMBERS 데이터 구조 변경 (`image` → `video` + `poster`)
- [x] `<img>` → `<video>` 태그 교체 (autoPlay, loop, muted, playsInline)

### Phase 2.3: 음악 재생 기능 ✅ (2026-01-29)
- [x] 실제 음악 파일 3곡 연동 (Yum, POP IT, I'm lovin' it)
- [x] HTML5 Audio를 사용한 재생/일시정지 기능
- [x] 트랙 전환 시 자동 재생 상태 유지
- [x] 앨범 정보 표시 제거

### Phase 3: 상태 및 연동
- [x] 선택 상태 관리 (URL params 방식)
- [x] 멤버 턴테이블 영상 연동 (MP4)
- [x] 음악 트랙 재생 기능 구현
- [ ] API 연동 (Replicate, Higgsfield)
- [ ] 에러 핸들링
- [ ] 실제 데이터 연동 (모션 GIF)

---

## 5. 참고 스크린샷 매핑

| 페이지 | 참고 이미지 |
|--------|------------|
| 랜딩 | `main-collection.png`, `main-hover.png` |
| 멤버 선택 | `look-detail.png` |
| 음악 선택 | `story.png` |
| 모션 선택 | `all-products.png`, `product-card-hover.png` |
| 생성 중 | `cart-panel.png` |
| 결과 | `look-detail.png` |
